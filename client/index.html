<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מקרי קורונה בישראל</title>

    <script type="text/javascript">
        const parseDateString = dateString => {
            const parts = dateString.split("-");
            // Months start at 0.
            const month = parts[0] - 1;
            const day = parts[1];
            const year = parts[2];

            return new Date(year, month, day);
        };
        const toDateString = date => {
            const day = date.getUTCDate().toString().padStart(2, "0");
            const month = (date.getUTCMonth() + 1).toString().padStart(2, "0");
            const year = date.getUTCFullYear();
            return `${month}-${day}-${year}`;
        };

        (async () => {
            const reportsUrl = "https://raw.githubusercontent.com/itaisteinherz/israel-coronavirus-stats/master/israel_reports.json";
            const reportsRequest = await fetch(reportsUrl);
            const json = await reportsRequest.json();

            const latestDate = toDateString(Object.keys(json).map(dateString => parseDateString(dateString)).sort((a, b) => b - a)[0]);
            const latestReport = json[latestDate];

            document.querySelector("#date").innerText = latestReport["Last Update"];
            document.querySelector("#cases").innerText = latestReport["Confirmed"];
            document.querySelector("#deaths").innerText = latestReport["Deaths"];
            document.querySelector("#recovered").innerText = latestReport["Recovered"];
        })();
    </script>
</head>
<body dir="rtl">
    <h1>תאריך:</h1>
    <p id="date"></p>

    <h1>חולים מאומתים:</h1>
    <p id="cases"></p>

    <h1>נפטרו:</h1>
    <p id="deaths"></p>

    <h1>החלימו:</h1>
    <p id="recovered"></p>
</body>
</html>